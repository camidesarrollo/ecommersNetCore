var ee=Object.freeze({status:"aborted"});function f(e,n,i){function r(s,m){if(s._zod||Object.defineProperty(s,"_zod",{value:{def:m,constr:l,traits:new Set},enumerable:!1}),s._zod.traits.has(e))return;s._zod.traits.add(e),n(s,m);let d=l.prototype,p=Object.keys(d);for(let b=0;b<p.length;b++){let $=p[b];$ in s||(s[$]=d[$].bind(s))}}let u=i?.Parent??Object;class c extends u{}Object.defineProperty(c,"name",{value:e});function l(s){var m;let d=i?.Parent?new c:this;r(d,s),(m=d._zod).deferred??(m.deferred=[]);for(let p of d._zod.deferred)p();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:s=>i?.Parent&&s instanceof i.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(l,"name",{value:e}),l}var Z=Symbol("zod_brand");var I={};function g(e){return e&&Object.assign(I,e),I}function o(e,n="|"){return e.map(i=>a(i)).join(n)}function _(e,n){return typeof n=="bigint"?n.toString():n}function D(e){return{get value(){{let i=e();return Object.defineProperty(this,"value",{value:i}),i}throw new Error("cached value already set")}}}var nr=Symbol("evaluating");var re="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};var te=D(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function a(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}var ne={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};var T=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,_,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},S=f("$ZodError",T),ie=f("$ZodError",T,{Parent:Error});function j(e,n=i=>i.message){let i={},r=[];for(let u of e.issues)u.path.length>0?(i[u.path[0]]=i[u.path[0]]||[],i[u.path[0]].push(n(u))):r.push(n(u));return{formErrors:r,fieldErrors:i}}function O(e,n=i=>i.message){let i={_errors:[]},r=u=>{for(let c of u.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(l=>r({issues:l}));else if(c.code==="invalid_key")r({issues:c.issues});else if(c.code==="invalid_element")r({issues:c.issues});else if(c.path.length===0)i._errors.push(n(c));else{let l=i,s=0;for(;s<c.path.length;){let m=c.path[s];s===c.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(n(c))):l[m]=l[m]||{_errors:[]},l=l[m],s++}}};return r(e),i}var ce="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",le=new RegExp(`^${ce}$`);var ge=e=>{let n=typeof e;switch(n){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return n},ve=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function n(r){return e[r]??null}let i={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${ge(r.input)}`;case"invalid_value":return r.values.length===1?`Invalid input: expected ${a(r.values[0])}`:`Invalid option: expected one of ${o(r.values,"|")}`;case"too_big":{let u=r.inclusive?"<=":"<",c=n(r.origin);return c?`Too big: expected ${r.origin??"value"} to have ${u}${r.maximum.toString()} ${c.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${u}${r.maximum.toString()}`}case"too_small":{let u=r.inclusive?">=":">",c=n(r.origin);return c?`Too small: expected ${r.origin} to have ${u}${r.minimum.toString()} ${c.unit}`:`Too small: expected ${r.origin} to be ${u}${r.minimum.toString()}`}case"invalid_format":{let u=r;return u.format==="starts_with"?`Invalid string: must start with "${u.prefix}"`:u.format==="ends_with"?`Invalid string: must end with "${u.suffix}"`:u.format==="includes"?`Invalid string: must include "${u.includes}"`:u.format==="regex"?`Invalid string: must match pattern ${u.pattern}`:`Invalid ${i[u.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${o(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function U(){return{localeError:ve()}}var V,be=Symbol("ZodOutput"),_e=Symbol("ZodInput"),x=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...i){let r=i[0];if(this._map.set(n,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,n)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){let i=this._map.get(n);return i&&typeof i=="object"&&"id"in i&&this._idmap.delete(i.id),this._map.delete(n),this}get(n){let i=n._zod.parent;if(i){let r={...this.get(i)??{}};delete r.id;let u={...r,...this._map.get(n)};return Object.keys(u).length?u:void 0}return this._map.get(n)}has(n){return this._map.has(n)}};function F(){return new x}(V=globalThis).__zod_globalRegistry??(V.__zod_globalRegistry=F());var k=globalThis.__zod_globalRegistry;var B=(e,n)=>{S.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:i=>O(e,i)},flatten:{value:i=>j(e,i)},addIssue:{value:i=>{e.issues.push(i),e.message=JSON.stringify(e.issues,_,2)}},addIssues:{value:i=>{e.issues.push(...i),e.message=JSON.stringify(e.issues,_,2)}},isEmpty:{get(){return e.issues.length===0}}})},Mo=f("ZodError",B),He=f("ZodError",B,{Parent:Error});var K;K||(K={});g(U());function W(e,n){let i=Object.fromEntries(e.entries()),r={};for(let[u,c]of Object.entries(i)){let l=n.shape?.[u];if(l==null)continue;if(!l){r[u]=c===""?null:c;continue}let m=X(l).type;if(m==="number"||m==="optional"||m==="string")if(c==="")r[u]=null;else{let d=Number(c);r[u]=isNaN(d)?c:d}else m==="boolean"?c==="true"||c==="on"||c===!0?r[u]=!0:r[u]=!1:r[u]=c===""?null:c}return r}function X(e){if(!e||!e._def)return e;let n=e._def.typeName;return n==="ZodOptional"||n==="ZodNullable"||n==="ZodEffects"||n==="ZodDefault"?X(e._def.innerType||e._def.schema):e}var z=document.getElementById("loadingModal"),q=document.getElementById("spinnerContent"),N=document.getElementById("resultModal"),al=document.getElementById("resultIcon"),ul=document.getElementById("resultTitle"),cl=document.getElementById("resultMessage"),ll=document.getElementById("resultButton"),Y=!1,h=null,H={creating:{icon:"\u2728",iconClass:"icon-pulse",title:"Creando Registro",subtitle:"Por favor espere",colorTitle:"var(--color-mint-green)",colorSubtitle:"var(--color-dark-chocolate)",type:""},editing:{icon:"\u270F\uFE0F",iconClass:"icon-rotate",title:"Editando Datos",subtitle:"Actualizando informaci\xF3n",colorTitle:"var(--color-golden-yellow)",colorSubtitle:"var(--color-dark-chocolate)",type:""},deleting:{icon:"\u{1F5D1}\uFE0F",iconClass:"icon-pulse",title:"Eliminando",subtitle:"Eliminando registro",colorTitle:"var(--color-burgundy-red)",colorSubtitle:"var(--color-dark-chocolate)",type:"circle"},uploading:{icon:"\u{1F4E4}",iconClass:"icon-bounce",title:"Subiendo Archivo",subtitle:"Cargando",colorTitle:"var(--color-olive-green)",colorSubtitle:"var(--color-dark-chocolate)",type:"upload"},processing:{icon:"\u2699\uFE0F",iconClass:"icon-rotate",title:"Procesando Datos",subtitle:"Analizando informaci\xF3n",colorTitle:"var(--color-nut-brown)",colorSubtitle:"var(--color-dark-chocolate)",type:"bars"},saving:{icon:"\u{1F4BE}",iconClass:"icon-pulse",title:"Guardando Cambios",subtitle:"Almacenando datos",colorTitle:"var(--color-orange-warm)",colorSubtitle:"var(--color-dark-chocolate)",type:"dots"},loading:{icon:"",iconClass:"icon-bounce",title:"Cargando",subtitle:"Obteniendo informaci\xF3n",colorTitle:"var(--color-golden-yellow)",colorSubtitle:"var(--color-dark-chocolate)",type:"circle"}};function er(e){let n={"":"",circle:'<div class="spinner mx-auto mb-6"><div class="spinner-ring"></div></div>',bars:`<div class="spinner-bars">${"<div class='spinner-bar'></div>".repeat(5)}</div>`,dots:`<div class="spinner-dots">${"<div class='spinner-dot'></div>".repeat(3)}</div>`,upload:`
            <div class="spinner-upload">
                <div class="upload-box">
                    <div class="upload-arrow">\u2B06\uFE0F</div>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar"></div>
            </div>
        `};return`
        <div class="action-icon ${e.iconClass}">${e.icon}</div>
        ${n[e.type]}
        <div class="spinner-title" style="color:${e.colorTitle}">
            ${e.title}
        </div>
        <div class="spinner-subtitle loading-dots" style="color:${e.colorSubtitle}">
            ${e.subtitle}<span>.</span><span>.</span><span>.</span>
        </div>
    `}function Q(e="loading",n=0,i){if(!z||!q)return;Y=!0,h!==null&&(clearTimeout(h),h=null);let r=H[e]??H.loading;q.innerHTML=er(r),z.classList.add("show"),document.body.style.overflow="hidden",n>0&&(h=window.setTimeout(()=>{P(),i?.()},n))}function P(){z&&(Y=!1,z.classList.remove("show"),document.body.style.overflow="",h!==null&&(clearTimeout(h),h=null))}function rr(){N&&(N.classList.remove("show"),document.body.style.overflow="")}document.addEventListener("keydown",e=>{e.key==="Escape"&&N?.classList.contains("show")&&rr()});function fl({form:e,schema:n,castSchema:i,spinnerAction:r="creating",onSuccess:u,onError:c}){if(!e||!n||!i){console.error("Faltan par\xE1metros obligatorios");return}e.addEventListener("submit",async l=>{l.preventDefault(),e.querySelectorAll(".is-invalid").forEach(d=>d.classList.remove("is-invalid")),Q(r);let s=new FormData(e),m=W(s,i);try{let d=await n.parseAsync(m);console.log("\u2705 Datos validados:",d),typeof u=="function"?await u(d):e.submit()}catch(d){d?.errors&&d.errors.forEach(p=>{let b=p.path[0],$=e.querySelector(`[name="${b}"]`);$&&tr($,p.message)}),console.warn("\u274C Errores de validaci\xF3n:",d),c?.(d)}finally{P()}})}function tr(e,n){e.classList.add("is-invalid");let i=e.nextElementSibling;i&&i.classList.contains("invalid-feedback")&&(i.textContent=n)}export{fl as handleZodFormSubmit};
//# sourceMappingURL=form-helpers.js.map
