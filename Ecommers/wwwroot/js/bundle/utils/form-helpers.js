function f(e,n){let r=Object.fromEntries(e.entries()),i={};for(let[l,o]of Object.entries(r)){let c=n.shape?.[l];if(c==null)continue;if(!c){i[l]=o===""?null:o;continue}let a=b(c).type;if(a==="number"||a==="optional"||a==="string")if(o==="")i[l]=null;else{let t=Number(o);i[l]=isNaN(t)?o:t}else a==="boolean"?o==="true"||o==="on"||o===!0?i[l]=!0:i[l]=!1:i[l]=o===""?null:o}return i}function b(e){if(!e||!e._def)return e;let n=e._def.typeName;return n==="ZodOptional"||n==="ZodNullable"||n==="ZodEffects"||n==="ZodDefault"?b(e._def.innerType||e._def.schema):e}var d=document.getElementById("loadingModal"),g=document.getElementById("spinnerContent"),u=document.getElementById("resultModal"),x=document.getElementById("resultIcon"),B=document.getElementById("resultTitle"),H=document.getElementById("resultMessage"),k=document.getElementById("resultButton"),S=!1,s=null,T={creating:{icon:"\u2728",iconClass:"icon-pulse",title:"Creando Registro",subtitle:"Por favor espere",colorTitle:"var(--color-mint-green)",colorSubtitle:"var(--color-dark-chocolate)",type:""},editing:{icon:"\u270F\uFE0F",iconClass:"icon-rotate",title:"Editando Datos",subtitle:"Actualizando informaci\xF3n",colorTitle:"var(--color-golden-yellow)",colorSubtitle:"var(--color-dark-chocolate)",type:""},deleting:{icon:"\u{1F5D1}\uFE0F",iconClass:"icon-pulse",title:"Eliminando",subtitle:"Eliminando registro",colorTitle:"var(--color-burgundy-red)",colorSubtitle:"var(--color-dark-chocolate)",type:"circle"},uploading:{icon:"\u{1F4E4}",iconClass:"icon-bounce",title:"Subiendo Archivo",subtitle:"Cargando",colorTitle:"var(--color-olive-green)",colorSubtitle:"var(--color-dark-chocolate)",type:"upload"},processing:{icon:"\u2699\uFE0F",iconClass:"icon-rotate",title:"Procesando Datos",subtitle:"Analizando informaci\xF3n",colorTitle:"var(--color-nut-brown)",colorSubtitle:"var(--color-dark-chocolate)",type:"bars"},saving:{icon:"\u{1F4BE}",iconClass:"icon-pulse",title:"Guardando Cambios",subtitle:"Almacenando datos",colorTitle:"var(--color-orange-warm)",colorSubtitle:"var(--color-dark-chocolate)",type:"dots"},loading:{icon:"",iconClass:"icon-bounce",title:"Cargando",subtitle:"Obteniendo informaci\xF3n",colorTitle:"var(--color-golden-yellow)",colorSubtitle:"var(--color-dark-chocolate)",type:"circle"}};function h(e){let n={"":"",circle:'<div class="spinner mx-auto mb-6"><div class="spinner-ring"></div></div>',bars:`<div class="spinner-bars">${"<div class='spinner-bar'></div>".repeat(5)}</div>`,dots:`<div class="spinner-dots">${"<div class='spinner-dot'></div>".repeat(3)}</div>`,upload:`
            <div class="spinner-upload">
                <div class="upload-box">
                    <div class="upload-arrow">\u2B06\uFE0F</div>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar"></div>
            </div>
        `};return`
        <div class="action-icon ${e.iconClass}">${e.icon}</div>
        ${n[e.type]}
        <div class="spinner-title" style="color:${e.colorTitle}">
            ${e.title}
        </div>
        <div class="spinner-subtitle loading-dots" style="color:${e.colorSubtitle}">
            ${e.subtitle}<span>.</span><span>.</span><span>.</span>
        </div>
    `}function E(e="loading",n=0,r){if(!d||!g)return;S=!0,s!==null&&(clearTimeout(s),s=null);let i=T[e]??T.loading;g.innerHTML=h(i),d.classList.add("show"),document.body.style.overflow="hidden",n>0&&(s=window.setTimeout(()=>{p(),r?.()},n))}function p(){d&&(S=!1,d.classList.remove("show"),document.body.style.overflow="",s!==null&&(clearTimeout(s),s=null))}function C(){u&&(u.classList.remove("show"),document.body.style.overflow="")}document.addEventListener("keydown",e=>{e.key==="Escape"&&u?.classList.contains("show")&&C()});function Z({form:e,schema:n,castSchema:r,spinnerAction:i="creating",onSuccess:l,onError:o}){if(!e||!n||!r){console.error("Faltan par\xE1metros obligatorios");return}e.addEventListener("submit",async c=>{c.preventDefault(),e.querySelectorAll(".is-invalid").forEach(t=>t.classList.remove("is-invalid")),E(i);let m=new FormData(e),a=f(m,r);try{let t=await n.parseAsync(a);console.log("\u2705 Datos validados:",t),typeof l=="function"?await l(t):e.submit()}catch(t){t?.errors&&t.errors.forEach(y=>{let w=y.path[0],v=e.querySelector(`[name="${w}"]`);v&&L(v,y.message)}),console.warn("\u274C Errores de validaci\xF3n:",t),o?.(t)}finally{p()}})}function L(e,n){e.classList.add("is-invalid");let r=e.nextElementSibling;r&&r.classList.contains("invalid-feedback")&&(r.textContent=n)}export{Z as handleZodFormSubmit};
//# sourceMappingURL=form-helpers.js.map
