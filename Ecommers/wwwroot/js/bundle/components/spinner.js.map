{
  "version": 3,
  "sources": ["../../domain/components/spinner.ts"],
  "sourcesContent": ["\uFEFF/**\r\n * ============================================\r\n * SISTEMA GLOBAL DE LOADING + SPINNERS (TS)\r\n * ============================================\r\n */\r\n\r\n// =====================\r\n// Tipos\r\n// =====================\r\ntype SpinnerType =\r\n    | \"creating\"\r\n    | \"editing\"\r\n    | \"deleting\"\r\n    | \"uploading\"\r\n    | \"processing\"\r\n    | \"saving\"\r\n    | \"loading\";\r\n\r\ntype SpinnerVisualType =\r\n    | \"\"\r\n    | \"circle\"\r\n    | \"bars\"\r\n    | \"dots\"\r\n    | \"upload\";\r\n\r\ninterface SpinnerConfig {\r\n    icon: string;\r\n    iconClass: string;\r\n    title: string;\r\n    subtitle: string;\r\n    colorTitle: string;\r\n    colorSubtitle: string;\r\n    type: SpinnerVisualType;\r\n}\r\n\r\n// =====================\r\n// Referencias DOM\r\n// =====================\r\nconst loadingModal = document.getElementById(\"loadingModal\") as HTMLElement | null;\r\nconst spinnerContent = document.getElementById(\"spinnerContent\") as HTMLElement | null;\r\n\r\nconst resultModal = document.getElementById(\"resultModal\") as HTMLElement | null;\r\nconst resultIcon = document.getElementById(\"resultIcon\") as HTMLElement | null;\r\nconst resultTitle = document.getElementById(\"resultTitle\") as HTMLElement | null;\r\nconst resultMessage = document.getElementById(\"resultMessage\") as HTMLElement | null;\r\nconst resultButton = document.getElementById(\"resultButton\") as HTMLButtonElement | null;\r\n\r\n// =====================\r\n// Estados globales\r\n// =====================\r\nlet activeSpinner: boolean = false;\r\nlet timeoutRef: number | null = null;\r\n\r\n// =====================\r\n// Configuraci\u00F3n spinners\r\n// =====================\r\nconst spinnerTypes: Record<SpinnerType, SpinnerConfig> = {\r\n    creating: {\r\n        icon: \"\u2728\",\r\n        iconClass: \"icon-pulse\",\r\n        title: \"Creando Registro\",\r\n        subtitle: \"Por favor espere\",\r\n        colorTitle: \"var(--color-mint-green)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"\"\r\n    },\r\n    editing: {\r\n        icon: \"\u270F\uFE0F\",\r\n        iconClass: \"icon-rotate\",\r\n        title: \"Editando Datos\",\r\n        subtitle: \"Actualizando informaci\u00F3n\",\r\n        colorTitle: \"var(--color-golden-yellow)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"\"\r\n    },\r\n    deleting: {\r\n        icon: \"\uD83D\uDDD1\uFE0F\",\r\n        iconClass: \"icon-pulse\",\r\n        title: \"Eliminando\",\r\n        subtitle: \"Eliminando registro\",\r\n        colorTitle: \"var(--color-burgundy-red)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"circle\"\r\n    },\r\n    uploading: {\r\n        icon: \"\uD83D\uDCE4\",\r\n        iconClass: \"icon-bounce\",\r\n        title: \"Subiendo Archivo\",\r\n        subtitle: \"Cargando\",\r\n        colorTitle: \"var(--color-olive-green)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"upload\"\r\n    },\r\n    processing: {\r\n        icon: \"\u2699\uFE0F\",\r\n        iconClass: \"icon-rotate\",\r\n        title: \"Procesando Datos\",\r\n        subtitle: \"Analizando informaci\u00F3n\",\r\n        colorTitle: \"var(--color-nut-brown)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"bars\"\r\n    },\r\n    saving: {\r\n        icon: \"\uD83D\uDCBE\",\r\n        iconClass: \"icon-pulse\",\r\n        title: \"Guardando Cambios\",\r\n        subtitle: \"Almacenando datos\",\r\n        colorTitle: \"var(--color-orange-warm)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"dots\"\r\n    },\r\n    loading: {\r\n        icon: \"\",\r\n        iconClass: \"icon-bounce\",\r\n        title: \"Cargando\",\r\n        subtitle: \"Obteniendo informaci\u00F3n\",\r\n        colorTitle: \"var(--color-golden-yellow)\",\r\n        colorSubtitle: \"var(--color-dark-chocolate)\",\r\n        type: \"circle\"\r\n    }\r\n};\r\n\r\n// =====================\r\n// Helpers\r\n// =====================\r\nfunction buildSpinnerHTML(cfg: SpinnerConfig): string {\r\n    const visuals: Record<SpinnerVisualType, string> = {\r\n        \"\": \"\",\r\n        circle: `<div class=\"spinner mx-auto mb-6\"><div class=\"spinner-ring\"></div></div>`,\r\n        bars: `<div class=\"spinner-bars\">${\"<div class='spinner-bar'></div>\".repeat(5)}</div>`,\r\n        dots: `<div class=\"spinner-dots\">${\"<div class='spinner-dot'></div>\".repeat(3)}</div>`,\r\n        upload: `\r\n            <div class=\"spinner-upload\">\r\n                <div class=\"upload-box\">\r\n                    <div class=\"upload-arrow\">\u2B06\uFE0F</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"progress-bar-container\">\r\n                <div class=\"progress-bar\"></div>\r\n            </div>\r\n        `\r\n    };\r\n\r\n    return `\r\n        <div class=\"action-icon ${cfg.iconClass}\">${cfg.icon}</div>\r\n        ${visuals[cfg.type]}\r\n        <div class=\"spinner-title\" style=\"color:${cfg.colorTitle}\">\r\n            ${cfg.title}\r\n        </div>\r\n        <div class=\"spinner-subtitle loading-dots\" style=\"color:${cfg.colorSubtitle}\">\r\n            ${cfg.subtitle}<span>.</span><span>.</span><span>.</span>\r\n        </div>\r\n    `;\r\n}\r\n\r\n// =====================\r\n// Spinner principal\r\n// =====================\r\nexport function showSpinner(\r\n    type: SpinnerType = \"loading\",\r\n    duration: number = 0,\r\n    callback?: () => void\r\n): void {\r\n    if (!loadingModal || !spinnerContent) return;\r\n\r\n    activeSpinner = true;\r\n\r\n    if (timeoutRef !== null) {\r\n        clearTimeout(timeoutRef);\r\n        timeoutRef = null;\r\n    }\r\n\r\n    const cfg = spinnerTypes[type] ?? spinnerTypes.loading;\r\n    spinnerContent.innerHTML = buildSpinnerHTML(cfg);\r\n\r\n    loadingModal.classList.add(\"show\");\r\n    document.body.style.overflow = \"hidden\";\r\n\r\n    if (duration > 0) {\r\n        timeoutRef = window.setTimeout(() => {\r\n            hideSpinner();\r\n            callback?.();\r\n        }, duration);\r\n    }\r\n}\r\n\r\nexport function hideSpinner(): void {\r\n    if (!loadingModal) return;\r\n\r\n    activeSpinner = false;\r\n    loadingModal.classList.remove(\"show\");\r\n    document.body.style.overflow = \"\";\r\n\r\n    if (timeoutRef !== null) {\r\n        clearTimeout(timeoutRef);\r\n        timeoutRef = null;\r\n    }\r\n}\r\n\r\n// =====================\r\n// Spinner para Promesas\r\n// =====================\r\nexport async function showSpinnerAsync<T>(\r\n    type: SpinnerType,\r\n    promise: Promise<T>\r\n): Promise<T> {\r\n    showSpinner(type);\r\n\r\n    try {\r\n        const result = await promise;\r\n        hideSpinner();\r\n        return result;\r\n    } catch (error) {\r\n        hideSpinner();\r\n        throw error;\r\n    }\r\n}\r\n\r\n// =====================\r\n// Modal de resultado\r\n// =====================\r\nexport function showResultModal(\r\n    type: \"success\" | \"error\",\r\n    title: string,\r\n    message: string\r\n): void {\r\n    if (!resultModal || !resultIcon || !resultTitle || !resultMessage || !resultButton) return;\r\n\r\n    if (type === \"success\") {\r\n        resultIcon.textContent = \"\u2705\";\r\n        resultTitle.style.color = \"var(--color-mint-green)\";\r\n        resultButton.className = \"result-button btn-success\";\r\n    } else {\r\n        resultIcon.textContent = \"\u274C\";\r\n        resultTitle.style.color = \"var(--color-burgundy-red)\";\r\n        resultButton.className = \"result-button btn-error\";\r\n    }\r\n\r\n    resultTitle.textContent = title;\r\n    resultMessage.textContent = message;\r\n\r\n    resultModal.classList.add(\"show\");\r\n    document.body.style.overflow = \"hidden\";\r\n}\r\n\r\nexport function hideResultModal(): void {\r\n    if (!resultModal) return;\r\n    resultModal.classList.remove(\"show\");\r\n    document.body.style.overflow = \"\";\r\n}\r\n\r\n// =====================\r\n// Bind de eventos UI\r\n// =====================\r\nfunction bindResultModalEvents(): void {\r\n    if (!resultButton) return;\r\n\r\n    resultButton.addEventListener(\"click\", () => {\r\n        hideResultModal();\r\n    });\r\n}\r\n\r\n// =====================\r\n// Eventos globales\r\n// =====================\r\nfunction bindGlobalEvents(): void {\r\n    document.addEventListener(\"keydown\", (e: KeyboardEvent) => {\r\n        if (e.key !== \"Escape\") return;\r\n\r\n        if (resultModal?.classList.contains(\"show\")) {\r\n            hideResultModal();\r\n            return;\r\n        }\r\n\r\n        if (loadingModal?.classList.contains(\"show\")) {\r\n            hideSpinner();\r\n        }\r\n    });\r\n}\r\n\r\n// =====================\r\n// Inicializador UI global\r\n// =====================\r\nexport function initGlobalUI(): void {\r\n    bindResultModalEvents();\r\n    bindGlobalEvents();\r\n}\r\n\r\n// En spinner.ts, a\u00F1ade al final:\r\nexport type { SpinnerType };"],
  "mappings": "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",
  "names": ["loadingModal", "spinnerContent", "resultModal", "resultIcon", "resultTitle", "resultMessage", "resultButton", "activeSpinner", "timeoutRef", "spinnerTypes", "buildSpinnerHTML", "cfg", "visuals", "showSpinner", "type", "duration", "callback", "hideSpinner", "showSpinnerAsync", "promise", "result", "error", "showResultModal", "title", "message", "hideResultModal", "bindResultModalEvents", "bindGlobalEvents", "initGlobalUI"]
}
