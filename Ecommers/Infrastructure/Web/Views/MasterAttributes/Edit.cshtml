@model Ecommers.Domain.Entities.MasterAttributesD

@{
    ViewData["Title"] = "Editar Maestro de atributos";
    Layout = "~/Infrastructure/Web/Views/Shared/_LayoutAdmin.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="~/css/shepherd.css">
}

<div class="bg-pattern min-h-screen py-8 px-4">
    <div class="mx-auto space-y-6">

        <!-- Breadcrumb -->
        <nav class="mb-6">
            <ol class="flex items-center space-x-2 bg-white rounded-lg shadow-sm p-4">
                <li>
                    <a href="@Url.Action("Index", "Home")" class="text-olive-green-600 flex items-center">
                        <i class="fas fa-home mr-2"></i>Inicio
                    </a>
                </li>
                <li><i class="fas fa-chevron-right text-sm text-gray-400"></i></li>
                <li>
                    <a href="@Url.Action("Index", "MasterAttributes")" class="text-olive-green-600">
                        Maestro de atributos
                    </a>
                </li>
                <li><i class="fas fa-chevron-right text-sm text-gray-400"></i></li>
                <li class="font-semibold text-dark-chocolate">Crear</li>
            </ol>
        </nav>

        <!-- Header -->
        <div class="mb-6 slide-in delay-200">
            <div class="glass-effect rounded-2xl p-6 shadow-olive-green/30">
                <div class="flex justify-between items-center flex-wrap gap-4">
                    <div>
                        <h1 class="text-3xl font-bold text-dark-chocolate mb-2 flex items-center">
                            <i class="fas fa-image text-olive-green-600 mr-3"></i>
                            Editar Maestro de Atributos
                        </h1>
                        <p class="text-gray-600">Define atributos dinámicos para productos</p>
                    </div>
                    <div class="flex gap-3">
                        <!-- Botón de ayuda en header -->
                        <button id="help-tour-button"
                                type="button"
                                class="help-button-header"
                                title="Iniciar tour guiado">
                            <i class="fas fa-question-circle"></i>
                            <span>Ayuda</span>
                        </button>

                        <!-- Botón volver -->
                        <a href="@Url.Action("Index", "MasterAttributes")"
                           class="inline-flex items-center px-6 py-3 bg-gray-light rounded-lg text-dark-chocolate font-semibold hover:bg-gray-light-dark transition-all" id="volver-button">
                            <i class="fas fa-arrow-left mr-2"></i>Volver
                        </a>
                    </div>
                </div>
            </div>

            <!-- FORM -->
            <form asp-action="Editar" method="post" class="space-y-6">
                @Html.AntiForgeryToken()

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                    <!-- COLUMNA IZQUIERDA -->
                    <div class="lg:col-span-2 space-y-6">

                        <!-- Información básica -->
                        <div class="glass-effect rounded-2xl p-6">
                            <h5 class="text-xl font-semibold mb-6 border-b pb-4">
                                <i class="fas fa-info-circle text-olive-green-600 mr-2"></i>
                                Información básica
                            </h5>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                                <div>
                                    <label asp-for="Name" class="block text-dark-chocolate font-semibold mb-2">
                                        Nombre <span class="text-red-700">*</span>
                                    </label>
                                    <input asp-for="Name" class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300" placeholder="Ej: Calorías" required />
                                    <span asp-validation-for="Name" class="text-red-700 text-sm"></span>
                                </div>

                                <div>
                                    <label asp-for="Slug" class="block text-dark-chocolate font-semibold mb-2">
                                        Slug <span class="text-red-700">*</span>
                                    </label>
                                    <input asp-for="Slug"
                                           class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300"
                                           placeholder="calorias"
                                           oninput="this.value=this.value.toLowerCase().replace(/\s+/g,'_')"
                                           required />
                                    <span asp-validation-for="Slug" class="text-red-700 text-sm"></span>
                                </div>

                                <div class="md:col-span-2">
                                    <label asp-for="Description" class="block text-dark-chocolate font-semibold mb-2">
                                        Descripción
                                    </label>
                                    <textarea asp-for="Description" rows="3"
                                              class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300"
                                              placeholder="Descripción del atributo"></textarea>
                                </div>

                            </div>
                        </div>

                        <!-- Configuración técnica -->
                        <div class="glass-effect rounded-2xl p-6">
                            <h5 class="text-xl font-semibold mb-6 border-b pb-4">
                                <i class="fas fa-sliders-h text-olive-green-600 mr-2"></i>
                                Configuración técnica
                            </h5>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                                <div>
                                    <label asp-for="DataType" class="block text-dark-chocolate font-semibold mb-2">
                                        Tipo de dato <span class="text-red-700">*</span>
                                    </label>
                                    <select asp-for="DataType" class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300" required>
                                        <option value="">Seleccione</option>
                                        <option value="string">Texto</option>
                                        <option value="decimal">Decimal</option>
                                        <option value="integer">Entero</option>
                                        <option value="boolean">Booleano</option>
                                        <option value="date">Fecha</option>
                                    </select>
                                </div>

                                <div>
                                    <label asp-for="DataType" class="block text-dark-chocolate font-semibold mb-2">
                                        Tipo de input <span class="text-red-700">*</span>
                                    </label>
                                    <select asp-for="InputType" class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300" required>
                                        <option value="">Seleccione</option>
                                        <option value="text">Text</option>
                                        <option value="textarea">Textarea</option>
                                        <option value="number">Number</option>
                                        <option value="select">Select</option>
                                        <option value="multiselect">Multiselect</option>
                                        <option value="checkbox">Checkbox</option>
                                        <option value="date">Date</option>
                                    </select>
                                </div>

                                <div>
                                    <label asp-for="Unit" class="font-semibold">Unidad</label>
                                    <input asp-for="Unit" class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300" placeholder="g, ml, kcal" />
                                </div>

                                <div>
                                    <label asp-for="Category" class="block text-dark-chocolate font-semibold mb-2">
                                        Categoría <span class="text-red-700">*</span>
                                    </label>
                                    <select asp-for="Category" class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-olive-green-500  ring-olive-green-500  outline-none transition-all duration-300" required>
                                        <option value="Alimento">Alimento</option>
                                        <option value="Bebida">Bebida</option>
                                        <option value="General">General</option>
                                    </select>
                                </div>

                            </div>
                        </div>

                    </div>

                    <!-- COLUMNA DERECHA -->
                    <div class="space-y-6">

                        <!-- Flags -->
                        <div class="glass-effect rounded-2xl p-6">
                            <h5 class="text-xl font-semibold mb-6 border-b pb-4">
                                <i class="fas fa-check-double text-olive-green-600 mr-2"></i>
                                Comportamiento
                            </h5>

                            <div class="space-y-4">

                                <div class="flex items-center">
                                    <input asp-for="IsRequired"
                                           type="checkbox"
                                           id="IsRequiredSwitch"
                                           class="w-12 h-6 rounded-full appearance-none cursor-pointer bg-gray-300 checked:bg-mint-green-700 relative transition-colors duration-300 ease-in-out before:content-[''] before:absolute before:top-1 before:left-1 before:w-4 before:h-4 before:bg-white before:rounded-full before:transition-transform before:duration-300 checked:before:translate-x-6"
                                           checked />
                                    <label for="IsRequiredSwitch" class="ml-3 text-dark-chocolate font-semibold cursor-pointer select-none">
                                        <i class="fas fa-toggle-on text-mint-green-700 mr-1"></i>
                                        Campo obligatorio
                                    </label>
                                </div>

                                <div class="flex items-center">
                                    <input asp-for="IsFilterable"
                                           type="checkbox"
                                           id="IsFilterableSwitch"
                                           class="w-12 h-6 rounded-full appearance-none cursor-pointer bg-gray-300 checked:bg-mint-green-700 relative transition-colors duration-300 ease-in-out before:content-[''] before:absolute before:top-1 before:left-1 before:w-4 before:h-4 before:bg-white before:rounded-full before:transition-transform before:duration-300 checked:before:translate-x-6"
                                           checked />
                                    <label for="IsFilterableSwitch" class="ml-3 text-dark-chocolate font-semibold cursor-pointer select-none">
                                        <i class="fas fa-toggle-on text-mint-green-700 mr-1"></i>
                                        Usar como filtro
                                    </label>
                                </div>
                                @* <div class="flex items-center">
                                    <input asp-for="IsVariant"
                                           type="checkbox"
                                           id="IsVariantSwitch"
                                           class="w-12 h-6 rounded-full appearance-none cursor-pointer bg-gray-300 checked:bg-mint-green-700 relative transition-colors duration-300 ease-in-out before:content-[''] before:absolute before:top-1 before:left-1 before:w-4 before:h-4 before:bg-white before:rounded-full before:transition-transform before:duration-300 checked:before:translate-x-6"
                                           checked />
                                    <label for="IsVariantSwitch" class="ml-3 text-dark-chocolate font-semibold cursor-pointer select-none">
                                        <i class="fas fa-toggle-on text-mint-green-700 mr-1"></i>
                                        Define variante
                                    </label>
                                </div> *@

                                <div class="flex items-center">
                                    <input asp-for="IsRequired"
                                           type="checkbox"
                                           id="IsRequiredSwitch"
                                           class="w-12 h-6 rounded-full appearance-none cursor-pointer bg-gray-300 checked:bg-mint-green-700 relative transition-colors duration-300 ease-in-out before:content-[''] before:absolute before:top-1 before:left-1 before:w-4 before:h-4 before:bg-white before:rounded-full before:transition-transform before:duration-300 checked:before:translate-x-6"
                                           checked />
                                    <label for="IsRequiredSwitch" class="ml-3 text-dark-chocolate font-semibold cursor-pointer select-none">
                                        <i class="fas fa-toggle-on text-mint-green-700 mr-1"></i>
                                        Atributo Activo
                                    </label>
                                </div>

                            </div>
                        </div>

                        <!-- Acciones -->
                        <div class="glass-effect rounded-2xl p-6 space-y-3">
                            <button type="submit"
                                    class="w-full bg-gradient-to-r from-amber-700 to-amber-900 text-white py-3 rounded-lg font-semibold">
                                <i class="fas fa-save mr-2"></i>Guardar atributo
                            </button>

                            <a href="@Url.Action("Index", "MasterAttributes")"
                               class="block w-full text-center bg-gray-200 py-3 rounded-lg font-semibold">
                                Cancelar
                            </a>
                        </div>

                    </div>

                </div>
            </form>
        </div>
    </div>
</div>
@section Scripts {
        <script type="module" src="~/js/application/masterAttributes/edit.js"></script>
}
