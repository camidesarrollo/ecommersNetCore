@model Ecommers.Web.Models.Shared.Components.SidebarViewModel
@{
    var basePath = Context.Request.PathBase;
    var baseUrl = $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.PathBase}";
}
<!-- Overlay para móviles -->
<div id="sidebar-overlay" class="fixed inset-0 z-30 hidden transition-opacity duration-300"></div>

<!-- Sidebar -->
<aside id="sidebar" class="fixed lg:static inset-y-0 left-0 z-40 w-72 lg:w-64 shadow-2xl transition-transform duration-300 ease-in-out flex flex-col">

    <!-- Header con logo y título -->
    <div class="flex items-center justify-between px-4 lg:px-5 py-4 lg:py-5 border-b border-white/10 bg-gradient-to-r from-nut-brown-900/50 to-transparent backdrop-blur-sm">
        <div class="flex items-center gap-3 min-w-0 flex-1">
            <div class="sidebar-logo-container shrink-0">
                <img src="@baseUrl/@Model.Configuracion.Logo" class="w-9 h-9 object-contain" alt="Logo @Model.Configuracion.AbreviacionEmpresa" />
            </div>
            <div class="min-w-0 flex-1">
                <h2 class="text-white font-bold text-base lg:text-lg leading-tight truncate">
                    Mi Tienda @Model.Configuracion.AbreviacionEmpresa
                </h2>
                <p class="text-yellow-300 text-xs mt-0.5 truncate">@Model.Configuracion.MetaAutor</p>
            </div>
        </div>

        <!-- Botón cerrar (solo móvil) -->
        <button id="close-sidebar-btn" class="lg:hidden shrink-0 ml-2" aria-label="Cerrar menú">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>

    <!-- Navegación con scroll -->
    <nav id="sidebar-nav" class="flex-1 overflow-y-auto overflow-x-hidden px-3 py-4 space-y-1">

        @* Menú principal *@
        @foreach (var item in Model.MenuItems)
        {
            <a href="@item.Path" class="sidebar-menu-item">
                <span class="relative z-10">@item.Name</span>

                @if (!string.IsNullOrEmpty(item.Badge))
                {
                    <span class="sidebar-badge pulse">
                        @item.Badge
                    </span>
                }
            </a>
        }

        @* Secciones con items *@
        @foreach (var sections in Model.Sections)
        {
            <div class="pt-4 pb-1">
                <h3 class="sidebar-section-title">
                    <span class="flex-1">@sections.Title</span>
                    <span class="sidebar-section-line"></span>
                </h3>

                @foreach (var item in sections.Items)
                {
                    <a href="@item.Path" class="sidebar-menu-item">
                        <span class="relative z-10">@item.Name</span>

                        @if (!string.IsNullOrEmpty(item.Badge))
                        {
                            <span class="sidebar-badge-orange">
                                @item.Badge
                            </span>
                        }
                    </a>
                }
            </div>
        }
    </nav>

    <!-- Footer fijo en la parte inferior -->
    <div class="border-t border-white/10 bg-gradient-to-t from-nut-brown-900/50 to-transparent backdrop-blur-sm">
        <button id="show-help-btn">
            <svg class="w-5 h-5 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="font-semibold text-sm">Ayuda</span>
        </button>

        <div class="px-4 py-3 text-center border-t border-white/5">
            <p class="text-yellow-300 text-xs leading-relaxed">
                © <span id="footer-year">@DateTime.Now.Year</span> @Model.Configuracion.AbreviacionEmpresa
                <br />
                <span class="text-beige-400/70">Todos los derechos reservados</span>
            </p>
        </div>
    </div>
</aside>